<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:Microsoft_Windows_Aero="clr-namespace:Microsoft.Windows.Themes;assembly=PresentationFramework.Aero"
    xmlns:Microsoft_Windows_Luna="clr-namespace:Microsoft.Windows.Themes;assembly=PresentationFramework.Luna"
    xmlns:componentModel="clr-namespace:System.ComponentModel;assembly=PresentationFramework"
    xmlns:shared="clr-namespace:Syncfusion.Windows.Shared;assembly=Syncfusion.Shared.WPF"
    xmlns:shell="clr-namespace:Syncfusion.Windows;assembly=Syncfusion.Shared.Wpf"
    xmlns:sys="clr-namespace:System;assembly=mscorlib" 
    xmlns:provider="clr-namespace:Syncfusion.SfSkinManager;assembly=Syncfusion.SfSkinManager.WPF"
    xmlns:tools="clr-namespace:Syncfusion.Windows.Tools.Controls;assembly=Syncfusion.Tools.WPF"
    xmlns:tools_resources="clr-namespace:Syncfusion.Windows.Tools.Controls.Resources;assembly=Syncfusion.Tools.WPF"
    xmlns:windows_shared="clr-namespace:Syncfusion.Windows;assembly=Syncfusion.Shared.Wpf">
    <ResourceDictionary.MergedDictionaries>
        <provider:ResourceDictionaryProvider DictionaryName="Common" ThemeName="MaterialDark"/>
        <provider:ResourceDictionaryProvider DictionaryName="Brushes" ThemeName="MaterialDark"/>
        <ResourceDictionary Source="/Syncfusion.Themes.MaterialDark.WPF;component/MSControl/ScrollViewer.xaml" />
        <ResourceDictionary Source="/Syncfusion.Themes.MaterialDark.WPF;component/MSControl/FlatButton.xaml" />
        <ResourceDictionary Source="/Syncfusion.Themes.MaterialDark.WPF;component/Ribbon/RibbonDropDownButton.xaml" />
        <ResourceDictionary Source="/Syncfusion.Themes.MaterialDark.WPF;component/Ribbon/RibbonTab.xaml" />
        <ResourceDictionary Source="/Syncfusion.Themes.MaterialDark.WPF;component/Ribbon/RibbonButton.xaml"/>
    </ResourceDictionary.MergedDictionaries>

    <tools:GalleryFilterConverter x:Key="GalleryFilterConverter" />
    <tools:CountToVisibilityConverter x:Key="CountToVisibilityConverter" />
    <tools:FilterToRibbonButtonConverter x:Key="FilterToRibbonButtonConverter" />

    <!--  PopupResizeThumb Style  -->
    <ControlTemplate x:Key="SyncfusionPopupResizeThumbControlTemplate" TargetType="{x:Type tools:PopupResizeThumb}">
        <Border
            Width="20"
            Height="10"
            HorizontalAlignment="Center"
            VerticalAlignment="Center"
            Background="Transparent">
            <Grid HorizontalAlignment="Center" VerticalAlignment="Center">
                <Path
                    Margin="1,1,0,0"
                    HorizontalAlignment="Center"
                    VerticalAlignment="Center"
                    Data="M0,0L2,0 2,2 0,2z M5,0L7,0 7,2 5,2z M10,0L12,0 12,2 10,2z M15,0L17,0 17,2 15,2z"
                    Fill="{StaticResource IconColor}" />
                <Path
                    Margin="0,0,1,1"
                    HorizontalAlignment="Center"
                    VerticalAlignment="Center"
                    Data="M0,0L2,0 2,2 0,2z M5,0L7,0 7,2 5,2z M10,0L12,0 12,2 10,2z M15,0L17,0 17,2 15,2z"
                    Fill="{StaticResource IconColor}" />
            </Grid>
        </Border>
        <ControlTemplate.Triggers>
            <Trigger Property="IsMouseOver" Value="True">
                <Setter Property="Cursor" Value="SizeNS" />
            </Trigger>
        </ControlTemplate.Triggers>
    </ControlTemplate>

    <Style x:Key="SyncfusionPopupResizeThumbStyle" TargetType="{x:Type tools:PopupResizeThumb}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type tools:PopupResizeThumb}">
                    <Border
                        Width="10"
                        Height="10"
                        HorizontalAlignment="Center"
                        VerticalAlignment="Center"
                        Background="Transparent">
                        <Grid Width="6" Height="6">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="0.5*" />
                                <ColumnDefinition Width="0.5*" />
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="0.5*" />
                                <RowDefinition Height="0.5*" />

                            </Grid.RowDefinitions>
                            <Border
                                Grid.Row="1"
                                Grid.Column="1"
                                Width="2"
                                Height="2"
                                HorizontalAlignment="Right"
                                VerticalAlignment="Bottom"
                                Background="#FFA7A7A7" />
                            <Border
                                Grid.Row="1"
                                Grid.Column="0"
                                Width="2"
                                Height="2"
                                HorizontalAlignment="Left"
                                VerticalAlignment="Bottom"
                                Background="#FFA7A7A7" />
                            <Border
                                Grid.Row="0"
                                Grid.Column="1"
                                Width="2"
                                Height="2"
                                HorizontalAlignment="Right"
                                VerticalAlignment="Top"
                                Background="#FFA7A7A7" />
                        </Grid>
                    </Border>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter Property="Cursor" Value="SizeNWSE" />
                        </Trigger>
                        <Trigger Property="FlowDirection" Value="RightToLeft">
                            <Setter Property="Cursor" Value="SizeNESW" />
                        </Trigger>

                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
        <Setter Property="HorizontalAlignment" Value="Right" />

    </Style>

    <Style BasedOn="{StaticResource SyncfusionPopupResizeThumbStyle}" TargetType="{x:Type tools:PopupResizeThumb}" />

    <!--  GalleryFilterSelector Style  -->
    <Style x:Key="SyncfusionGalleryFilterSelectorStyle" TargetType="{x:Type tools:GalleryFilterSelector}">
        <Setter Property="Visibility" Value="Collapsed" />
        <Setter Property="Foreground" Value="{StaticResource ContentForeground}" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type tools:GalleryFilterSelector}">
                    <Grid>
                        <Border
                            Name="PART_DropDownButton"
                            Height="15"
                            Background="{StaticResource ContentBackgroundAlt2}"
                            BorderBrush="{StaticResource BorderAlt}"
                            BorderThickness="{StaticResource MaterialDark.ThemeBorderThicknessVariant1}">
                            <StackPanel Orientation="Horizontal">
                                <TextBlock
                                    Margin="10,0,0,0"
                                    VerticalAlignment="Center"
                                    FontSize="12"
                                    FontStyle="Normal"
                                    Text="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type tools:GalleryFilterSelector}}, Path=SelectedFilter.Label}" />
                                <Path
                                    Margin="1"
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Center"
                                    Data="M 0 0 L 4 4 L 8 0 Z"
                                    Fill="{StaticResource IconColor}" />
                            </StackPanel>
                        </Border>
                        <Popup
                            Name="PART_Popup"
                            AllowsTransparency="True"
                            Focusable="False"
                            IsOpen="{Binding Path=IsDropDownOpen, Mode=TwoWay, RelativeSource={RelativeSource AncestorType={x:Type tools:GalleryFilterSelector}}}"
                            Placement="Bottom"
                            PopupAnimation="Fade"
                            StaysOpen="False">
                            <Border
                                Background="{StaticResource SecondarySelectionBackground}"
                                BorderBrush="{StaticResource SecondarySelectionBackground}"
                                BorderThickness="{StaticResource MaterialDark.BorderThickness}"
                                  Effect="{StaticResource Default.ShadowDepth3}">
                                <Border.Margin>
                                            <Thickness>8,0,8,8</Thickness>
                                </Border.Margin>
                                <tools:RibbonButtonChecker CheckedButton="{Binding Mode=TwoWay, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type tools:GalleryFilterSelector}}, Converter={StaticResource FilterToRibbonButtonConverter}, Path=SelectedFilter}" ItemsSource="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type tools:GalleryFilterSelector}}, Converter={StaticResource GalleryFilterConverter}, ConverterParameter={StaticResource SyncfusionQATMenuItemRibbonButtonStyle}, Path=Filters}" />
                            </Border>
                        </Popup>
                    </Grid>

                </ControlTemplate>
            </Setter.Value>
        </Setter>
        <Style.Triggers>
            <DataTrigger Binding="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type tools:RibbonGallery}}, Path=HasFilters}" Value="True">
                <Setter Property="Filters" Value="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type tools:RibbonGallery}}, Path=GalleryFilters}" />
                <Setter Property="SelectedFilter" Value="{Binding Mode=TwoWay, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type tools:RibbonGallery}}, Path=CurrentFilter}" />
                <Setter Property="Visibility" Value="Visible" />
            </DataTrigger>
        </Style.Triggers>
    </Style>
    <Style BasedOn="{StaticResource SyncfusionGalleryFilterSelectorStyle}" TargetType="{x:Type tools:GalleryFilterSelector}" />

    <!--  GalleryItem template  -->
    <Style x:Key="SyncfusionRibbonGalleryItemStyle" TargetType="{x:Type tools:RibbonGalleryItem}">
        <Setter Property="Background" Value="Transparent" />
        <Setter Property="BorderBrush" Value="Transparent" />
        <Setter Property="Foreground" Value="{StaticResource SecondaryForeground}" />
        <Setter Property="ClickMode" Value="Release" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type tools:RibbonGalleryItem}">
                    <Border
                        Name="PART_TrippleBorder"
                        MinWidth="0"
                        Background="Transparent"
                        BorderBrush="{TemplateBinding BorderBrush}"
                        BorderThickness="{StaticResource MaterialDark.BorderThickness1}"
                        SnapsToDevicePixels="True">
                        <ContentPresenter
                                x:Name="Contentnew"
                                MinWidth="0"
                                Margin="1,0,1,0"
                                HorizontalAlignment="Stretch"
                                VerticalAlignment="Stretch"
                                ContentSource="{TemplateBinding Content}"
                                ContentTemplate="{TemplateBinding ContentTemplate}"
                                ContentTemplateSelector="{TemplateBinding ContentTemplateSelector}" />
                    </Border>
                    <ControlTemplate.Triggers>
                        <MultiDataTrigger>
                            <MultiDataTrigger.Conditions>
                                <Condition Binding="{Binding RelativeSource={RelativeSource Self}, Path=(tools:SimplifiedLayoutSettings.LayoutMode)}" Value="Simplified"/>
                                <Condition Binding="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type tools:RibbonGallery}}, Path=IsDropDownOpen}" Value="False"/>
                            </MultiDataTrigger.Conditions>
                            <Setter Property="Height" Value="30"/>
                            <Setter Property="VerticalAlignment" Value="Top"/>
                        </MultiDataTrigger>
                        <Trigger Property="IsChecked" Value="true">
                            <Setter TargetName="PART_TrippleBorder" Property="Background" Value="{StaticResource SecondarySelectionBackground}" />
                        </Trigger>
                        <Trigger Property="IsMouseOver" Value="true">
                            <Setter TargetName="PART_TrippleBorder" Property="Background" Value="{StaticResource SecondaryHoverBackground}" />
                            <Setter TargetName="PART_TrippleBorder" Property="BorderBrush" Value="{StaticResource SecondaryHoverBackground}" />
                            <Setter TargetName="Contentnew" Property="TextElement.Foreground" Value="{StaticResource SecondaryForeground}" />
                        </Trigger>

                        <Trigger Property="IsPressed" Value="true">
                            <Setter TargetName="PART_TrippleBorder" Property="Background" Value="{StaticResource SecondarySelectionBackground}" />
                            <Setter TargetName="PART_TrippleBorder" Property="BorderBrush" Value="{StaticResource SecondarySelectionBackground}" />
                            <Setter TargetName="Contentnew" Property="TextElement.Foreground" Value="{StaticResource SecondaryForeground}" />
                        </Trigger>
                        <Trigger Property="IsEnabled" Value="false">
                            <Setter TargetName="PART_TrippleBorder" Property="Background" Value="Transparent" />
                            <Setter TargetName="PART_TrippleBorder" Property="BorderBrush" Value="Transparent" />
                            <Setter TargetName="Contentnew" Property="TextElement.Foreground" Value="{StaticResource SecondaryForegroundDisabled}" />
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    <Style BasedOn="{StaticResource SyncfusionRibbonGalleryItemStyle}" TargetType="{x:Type tools:RibbonGalleryItem}" />

    <!--  RibbonMenuGroup Style  -->
    <Style x:Key="SyncfusionRibbonMenuGroupStyle" TargetType="{x:Type tools:RibbonMenuGroup}">
        <Setter Property="IsTabStop" Value="False" />
        <Setter Property="Focusable" Value="False" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type tools:RibbonMenuGroup}">
                    <tools:LayoutPanel x:Name="PART_LayoutPanel">
                        <StackPanel Margin="1,0,1,1" HorizontalAlignment="Stretch">
                            <Border
                                Name="PART_Header"
                                Height="21"
                                Margin="0,0,0,2"
                                Padding="7,0,5,0"
                                HorizontalAlignment="Stretch"
                                Background="{StaticResource ContentBackgroundAlt2}"
                                BorderBrush="{StaticResource BorderAlt}"
                                BorderThickness="0,5,0,0"
                                SnapsToDevicePixels="True">
                                <TextBlock
                                    VerticalAlignment="Center"
                                    FontSize="{TemplateBinding FontSize}"
                                    FontWeight="Bold"
                                    Foreground="{StaticResource ContentForeground}"
                                    Text="{TemplateBinding Header}" />
                            </Border>
                            <ItemsPresenter
                                x:Name="PART_Presenter"
                                Margin="0,0,0,1"
                                HorizontalAlignment="Left"
                                KeyboardNavigation.DirectionalNavigation="Contained"
                                KeyboardNavigation.TabNavigation="Contained"
                                SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" />
                        </StackPanel>
                        <!--  <Border BorderThickness="0,0,1,0"  Visibility="{TemplateBinding IconBarEnabled, Converter={StaticResource BooleanToVisibilityConverter}}"  Margin="1,1,1,1" Background="Transparent" BorderBrush="{StaticResource IconBar

                        Brush}" Height="{TemplateBinding ActualHeight}" Width="22" Panel.ZIndex="-1" HorizontalAlignment="Left"/>-->
                    </tools:LayoutPanel>
                    <ControlTemplate.Triggers>
                        <Trigger Property="HasHeader" Value="False">
                            <Setter TargetName="PART_Header" Property="Height" Value="1" />
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    <Style BasedOn="{StaticResource SyncfusionRibbonMenuGroupStyle}" TargetType="{x:Type tools:RibbonMenuGroup}" />

    <Style x:Key="SyncfusionRibbonGalleryGroupStyle" TargetType="{x:Type tools:RibbonGalleryGroup}">
        <Setter Property="Background" Value="{StaticResource ContentBackgroundAlt}" />
        <Setter Property="Background" Value="{StaticResource BorderAlt}" />
        <Setter Property="BorderThickness" Value="{StaticResource MaterialDark.BorderThickness}" />
        <Setter Property="Foreground" Value="{StaticResource ContentForeground}" />
        <Setter Property="Height" Value="21" />
        <Setter Property="IsTabStop" Value="False" />
        <Setter Property="FontStyle" Value="Normal" />
        <Setter Property="FontWeight" Value="Bold" />
        <Setter Property="VerticalAlignment" Value="Center" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type tools:RibbonGalleryGroup}">
                    <Border
                        Width="{TemplateBinding Width}"
                        Height="{TemplateBinding Height}"
                        Padding="7,0,0,0"
                        Background="{TemplateBinding Background}"
                        BorderBrush="{TemplateBinding BorderBrush}"
                        BorderThickness="{TemplateBinding BorderThickness}">
                        <TextBlock
                            HorizontalAlignment="{TemplateBinding HorizontalAlignment}"
                            VerticalAlignment="{TemplateBinding VerticalAlignment}"
                            FlowDirection="{TemplateBinding FlowDirection}"
                            FontFamily="{TemplateBinding FontFamily}"
                            FontSize="{TemplateBinding FontSize}"
                            FontStyle="{TemplateBinding FontStyle}"
                            FontWeight="{TemplateBinding FontWeight}"
                            Foreground="{TemplateBinding Foreground}"
                            Text="{TemplateBinding Label}" />
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    <Style BasedOn="{StaticResource SyncfusionRibbonGalleryGroupStyle}" TargetType="{x:Type tools:RibbonGalleryGroup}" />

    <!--  GalleryRepeatButtonStyle  -->
    <Style x:Key="GalleryRepeatButtonStyle" BasedOn="{StaticResource WPFFlatButtonStyle}" TargetType="{x:Type Button}">
        <Setter Property="ClickMode" Value="Press" />
        <Setter Property="Width" Value="16" />
        <Setter Property="BorderThickness" Value="{StaticResource MaterialDark.BorderThickness1}"/>
    </Style>
	
	<DataTemplate x:Key="RibbonItemVectorImageTemplate">
        <Grid>
            <Viewbox Name="VectorImage">
                <Viewbox.Child>
                    <Grid x:Name="PathGrid" />
                </Viewbox.Child>
            </Viewbox>
        </Grid>
    </DataTemplate>

    <DataTemplate x:Key="RibbonItemIconTemplate">
        <Grid>
            <Image RenderOptions.BitmapScalingMode="NearestNeighbor"   x:Name="PART_Image" Source="{Binding Tag, RelativeSource={RelativeSource TemplatedParent }}" />
        </Grid>
    </DataTemplate>

    <!--  RibbonGallery Style  -->
    <Style x:Key="SyncfusionRibbonGalleryStyle" TargetType="{x:Type tools:RibbonGallery}">
        <Setter Property="BorderThickness" Value="{StaticResource MaterialDark.BorderThickness1}" />
        <Setter Property="ItemMouseOverBorderThickness" Value="1" />
        <Setter Property="BorderBrush" Value="{StaticResource BorderAlt}" />
        <Setter Property="Background" Value="{StaticResource ContentBackgroundAlt2}" />
        <Setter Property="Foreground" Value="{StaticResource ContentForeground}"/>
        <Setter Property="MediumIcon" Value="pack://application:,,,/Syncfusion.Tools.WPF;component/Framework/Ribbon/Resources/WordArt20.png" />
        <Setter Property="Margin" Value="1" />
        <Setter Property="Height" Value="62" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type tools:RibbonGallery}">
                    <Border
                        Height="{TemplateBinding Height}"
                        MaxHeight="62"
                        Background="{TemplateBinding Background}"
                        BorderBrush="{TemplateBinding BorderBrush}"
                        BorderThickness="{StaticResource MaterialDark.BorderThickness1}">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="16" />
                            </Grid.ColumnDefinitions>

                            <Grid Grid.Column="1">
                                <Grid.RowDefinitions>
                                    <RowDefinition />
                                    <RowDefinition />
                                    <RowDefinition />
                                </Grid.RowDefinitions>

                                <Button
                                    Name="PART_ScrollUpButton"
                                    Grid.Row="0"
                                    Margin="0,0,-2,0"
                                    Style="{StaticResource GalleryRepeatButtonStyle}">
                                    <Path
                                        Width="5"
                                        Height="3"
                                        HorizontalAlignment="Center"
                                        VerticalAlignment="Center"
                                        Data="M0,0 L100.25,0 100.25,20 80,20 80,39.75 60.5,39.75 60.5,60 39.75,60 39.75,39.75 20.75,39.75 20.75,20 0,20 z"
                                        Fill="{Binding Path=Foreground, RelativeSource={RelativeSource AncestorType={x:Type Button}}}"
                                        RenderTransformOrigin="0.5,0.5"
                                        Stretch="Fill">
                                        <Path.RenderTransform>
                                            <RotateTransform Angle="180" />
                                        </Path.RenderTransform>
                                    </Path>
                                </Button>

                                <Button
                                    Name="PART_ScrollDownButton"
                                    Grid.Row="1"
                                    Margin="0,0,-2,0"
                                    Style="{StaticResource GalleryRepeatButtonStyle}">
                                    <Path
                                        Width="5"
                                        Height="3"
                                        HorizontalAlignment="Center"
                                        VerticalAlignment="Center"
                                        Data="M0,0 L100.25,0 100.25,20 80,20 80,39.75 60.5,39.75 60.5,60 39.75,60 39.75,39.75 20.75,39.75 20.75,20 0,20 z "
                                        Fill="{Binding Path=Foreground, RelativeSource={RelativeSource AncestorType={x:Type Button}}}"
                                        Stretch="Fill" />
                                </Button>

                                <Border
                                    Name="PART_ToggleButton"
                                    Grid.Row="2"
                                    Width="16"
                                    Height="20"
                                    Margin="0,0,-2,0"
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Center"
                                    Background="{StaticResource ContentBackgroundAlt2}"
                                    BorderBrush="{StaticResource BorderAlt}"
                                    BorderThickness="{StaticResource MaterialDark.BorderThickness1}">
                                    <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                                        <Path
                                            x:Name="Path1"
                                            Margin="0,0,0,2"
                                            HorizontalAlignment="Center"
                                            Data="M0,0.5L7,0.5"
                                            Fill="{StaticResource IconColor}"
                                            Stroke="{StaticResource IconColor}" />
                                        <Path
                                            x:Name="Path2"
                                            Width="5"
                                            Height="3"
                                            HorizontalAlignment="Center"
                                            VerticalAlignment="Center"
                                            Data="M0,0 L100.25,0 100.25,20 80,20 80,39.75 60.5,39.75 60.5,60 39.75,60 39.75,39.75 20.75,39.75 20.75,20 0,20 z"
                                            Fill="{StaticResource IconColor}"
                                            Stretch="Fill"
                                            Stroke="{StaticResource IconColor}" />
                                    </StackPanel>
                                </Border>
                            </Grid>
                            <tools:InRibbonItemsPresenter
                                Name="PART_ScrollPresenter"
                                Margin="1"
                                ClipToBounds="True" />
                            <Popup
                                Name="PART_Popup"
                                AllowsTransparency="True"
                                Focusable="False"
                                IsOpen="{Binding Path=IsDropDownOpen, Mode=TwoWay, RelativeSource={RelativeSource AncestorType={x:Type tools:RibbonGallery}}}"
                                Placement="Custom"
                                PopupAnimation="Fade"
                                StaysOpen="False">

                                <Border
                                    Background="{StaticResource ContentBackgroundAlt2}"
                                    BorderBrush="{StaticResource BorderAlt}"
                                    BorderThickness="{StaticResource MaterialDark.BorderThickness}"
                                    Effect="{StaticResource Default.ShadowDepth3}">
                                    <Border.Margin>
                                                <Thickness>0.5,0,12,8</Thickness>
                                    </Border.Margin>
                                    <DockPanel SnapsToDevicePixels="True">
                                        <Border
                                            Name="PART_ThumbBorder"
                                            Background="Transparent"
                                            DockPanel.Dock="Bottom">
                                            <tools:PopupResizeThumb
                                                Name="PART_ResizeThumb"
                                                HorizontalAlignment="Right"
                                                IsTabStop="False" />
                                        </Border>
                                        <tools:GalleryFilterSelector DockPanel.Dock="Top" />
                                        <Grid DockPanel.Dock="Top">
                                            <Grid.RowDefinitions>
                                                <RowDefinition MinHeight="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type tools:RibbonGallery}}, Path=ItemHeight}" />
                                                <RowDefinition Height="Auto" />
                                            </Grid.RowDefinitions>
                                            <ScrollViewer
                                                Name="PART_ScrollViewer"
                                                Grid.Row="0"
                                                VerticalScrollBarVisibility="Auto"
                                                Style="{StaticResource WPFScrollViewerStyle}">
                                                <StackPanel>
                                                    <ItemsControl Name="PART_PopupItemsControl">
                                                        <ItemsControl.ItemsPanel>
                                                            <ItemsPanelTemplate>
                                                                <WrapPanel
                                                                    IsItemsHost="True"
                                                                    ItemHeight="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type tools:RibbonGallery}}, Path=ItemHeight}"
                                                                    ItemWidth="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type tools:RibbonGallery}}, Path=ItemWidth}" />
                                                            </ItemsPanelTemplate>
                                                        </ItemsControl.ItemsPanel>
                                                    </ItemsControl>
                                                </StackPanel>
                                            </ScrollViewer>
                                            <tools:RibbonMenuGroup
                                                Grid.Row="1"
                                                IconBarEnabled="{TemplateBinding MenuIconBarEnabled}"
                                                ItemsSource="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type tools:RibbonGallery}}, Path=MenuItems}"
                                                Visibility="{TemplateBinding MenuItems,
                                                                             Converter={StaticResource CountToVisibilityConverter}}" />
                                        </Grid>
                                    </DockPanel>
                                </Border>

                            </Popup>
                        </Grid>
                    </Border>
                    <ControlTemplate.Triggers>

                        <Trigger SourceName="PART_ToggleButton" Property="IsMouseOver" Value="True">
                            <Setter TargetName="PART_ToggleButton" Property="Background" Value="{StaticResource SecondarySelectionBackground}" />
                            <Setter TargetName="Path1" Property="Fill" Value="{StaticResource IconColor}" />
                            <Setter TargetName="Path2" Property="Stroke" Value="{StaticResource IconColor}" />
                        </Trigger>

                        <Trigger Property="HasGroups" Value="True">
                            <Setter TargetName="PART_PopupItemsControl" Property="ItemsPanel">
                                <Setter.Value>
                                    <ItemsPanelTemplate>
                                        <tools:GalleryGroupPanel KeyboardNavigation.AcceptsReturn="True" KeyboardNavigation.DirectionalNavigation="Cycle" />
                                    </ItemsPanelTemplate>
                                </Setter.Value>
                            </Setter>
                        </Trigger>
                        <Trigger Property="ResizeDirection" Value="HorizontalAndVertical">
                            <Setter TargetName="PART_Popup" Property="Width" Value="{Binding ElementName=PART_ResizeThumb, Mode=TwoWay, Path=HorizontalOffset}" />
                            <Setter TargetName="PART_Popup" Property="Height" Value="{Binding ElementName=PART_ResizeThumb, Mode=TwoWay, Path=VerticalOffset}" />
                        </Trigger>
                        <Trigger Property="ResizeDirection" Value="VerticalOnly">
                            <Setter TargetName="PART_Popup" Property="Height" Value="{Binding ElementName=PART_ResizeThumb, Mode=TwoWay, Path=VerticalOffset}" />
                            <Setter TargetName="PART_ResizeThumb" Property="Template" Value="{StaticResource SyncfusionPopupResizeThumbControlTemplate}" />
                            <Setter TargetName="PART_ResizeThumb" Property="HorizontalAlignment" Value="Center" />
                        </Trigger>
                        <Trigger Property="PopupPosition" Value="Above">
                            <Setter TargetName="PART_ThumbBorder" Property="DockPanel.Dock" Value="Top" />
                            <Setter TargetName="PART_ScrollViewer" Property="DockPanel.Dock" Value="Bottom" />
                            <Setter TargetName="PART_ResizeThumb" Property="RenderTransform">
                                <Setter.Value>
                                    <RotateTransform Angle="270" CenterX="5" CenterY="5" />
                                </Setter.Value>
                            </Setter>
                            <Setter TargetName="PART_ResizeThumb" Property="Cursor" Value="SizeNESW" />
                        </Trigger>
                        <Trigger Property="ResizeDirection" Value="NoResize">
                            <Setter TargetName="PART_ResizeThumb" Property="Visibility" Value="Collapsed" />
                        </Trigger>
                        <MultiDataTrigger>
                            <MultiDataTrigger.Conditions>
                                <Condition Binding="{Binding RelativeSource={RelativeSource Self}, Path=PopupPosition}" Value="Above" />
                                <Condition Binding="{Binding RelativeSource={RelativeSource Self}, Path=FlowDirection}" Value="RightToLeft" />
                            </MultiDataTrigger.Conditions>
                            <Setter TargetName="PART_ResizeThumb" Property="RenderTransform">
                                <Setter.Value>
                                    <RotateTransform Angle="270" CenterX="5" CenterY="5" />
                                </Setter.Value>
                            </Setter>
                            <Setter TargetName="PART_ResizeThumb" Property="Cursor" Value="SizeNWSE" />
                        </MultiDataTrigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
        <Setter Property="ItemsPanel">
            <Setter.Value>
                <ItemsPanelTemplate>
                    <WrapPanel
                        Background="Transparent"
                        ClipToBounds="True"
                        ItemHeight="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type tools:RibbonGallery}}, Path=ItemHeight}"
                        ItemWidth="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type tools:RibbonGallery}}, Path=ItemWidth}" />
                </ItemsPanelTemplate>
            </Setter.Value>
        </Setter>
        <Style.Triggers>
            <MultiTrigger>
                <MultiTrigger.Conditions>
                    <Condition Property="VisualMode" Value="DropDown" />
                    <Condition Property="SizeForm" Value="Large" />
                </MultiTrigger.Conditions>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="{x:Type tools:RibbonGallery}">
                            <Border
                                Name="PART_OuterBorder"
                                BorderBrush="Transparent"
                                BorderThickness="{StaticResource MaterialDark.BorderThickness}">
                                <StackPanel>
                                    <Border
                                        Name="PART_ToggleButton"
                                        Height="{TemplateBinding Height}"
                                        Background="{TemplateBinding Background}"
                                        BorderBrush="{TemplateBinding BorderBrush}"
                                        BorderThickness="{StaticResource MaterialDark.BorderThickness1}">
                                        <StackPanel>
                                            <ContentPresenter 
                                    ContentTemplateSelector="{TemplateBinding IconTemplateSelector}" 
                                    Name="IconContent" VerticalAlignment="Top" Margin="0,1,0,0" ContentTemplate="{TemplateBinding IconTemplate}" Content="{Binding }" Height="32" Width="32"/>

                                            <tools:CustomItemsControl Foreground="{TemplateBinding Foreground}" ItemsSource="{Binding Path=Label, Mode=OneWay, Converter={StaticResource TextWrappingConverter}, RelativeSource={RelativeSource TemplatedParent}}" Path="{StaticResource DropDownPath}">
                                                <ItemsControl.ItemsPanel>
                                                    <ItemsPanelTemplate>
                                                        <tools:MultilinePanel />
                                                    </ItemsPanelTemplate>
                                                </ItemsControl.ItemsPanel>
                                            </tools:CustomItemsControl>
                                        </StackPanel>
                                    </Border>

                                    <Popup
                                        Name="PART_Popup"
                                        MinWidth="{TemplateBinding ExpandWidth}"
                                        MinHeight="{TemplateBinding ExpandHeight}"
                                        AllowsTransparency="True"
                                        Focusable="False"
                                        IsOpen="{Binding Path=IsDropDownOpen, Mode=TwoWay, RelativeSource={RelativeSource AncestorType={x:Type tools:RibbonGallery}}}"
                                        Placement="Custom"
                                        PopupAnimation="Fade"
                                        StaysOpen="False">
                                        <Border
                                            Background="{StaticResource ContentBackgroundAlt2}"
                                            BorderBrush="{StaticResource BorderAlt}"
                                            BorderThickness="{StaticResource MaterialDark.BorderThickness1}"
                                            Effect="{StaticResource Default.ShadowDepth3}">
                                            <Border.Margin>
                                                        <Thickness>8,0,8,8</Thickness>
                                            </Border.Margin>
                                            <DockPanel LastChildFill="True" SnapsToDevicePixels="True">
                                                <Border
                                                    Name="PART_ThumbBorder"
                                                    Background="Transparent"
                                                    DockPanel.Dock="Bottom">
                                                    <tools:PopupResizeThumb Name="PART_ResizeThumb" HorizontalAlignment="Right" />
                                                </Border>
                                                <tools:GalleryFilterSelector DockPanel.Dock="Top" />

                                                <Grid DockPanel.Dock="Top">
                                                    <Grid.RowDefinitions>
                                                        <RowDefinition MinHeight="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type tools:RibbonGallery}}, Path=ItemHeight}" />
                                                        <RowDefinition Height="Auto" MinHeight="0" />
                                                    </Grid.RowDefinitions>
                                                    <ScrollViewer Grid.Row="0">
                                                        <ItemsPresenter VerticalAlignment="Top" />
                                                    </ScrollViewer>

                                                    <tools:RibbonMenuGroup
                                                        Grid.Row="1"
                                                        IconBarEnabled="{TemplateBinding MenuIconBarEnabled}"
                                                        ItemsSource="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type tools:RibbonGallery}}, Path=MenuItems}"
                                                        Visibility="{TemplateBinding MenuItems,
                                                                                     Converter={StaticResource CountToVisibilityConverter}}" />
                                                </Grid>
                                            </DockPanel>
                                        </Border>

                                    </Popup>
                                </StackPanel>
                            </Border>
                            <ControlTemplate.Triggers>
                                <MultiTrigger >
                                    <MultiTrigger.Conditions>
                                        <Condition Property="IconTemplate" Value="{x:Null}"/>
                                        <Condition Property="IconType" Value="VectorImage"/>
                                        <Condition Property="IconTemplateSelector" Value="{x:Null}"/>
                                    </MultiTrigger.Conditions>
                                    <Setter Property="ContentTemplate" TargetName="IconContent" Value="{StaticResource RibbonItemVectorImageTemplate}"/>
                                </MultiTrigger>
                                <MultiTrigger>
                                    <MultiTrigger.Conditions>
                                        <Condition Property="IconTemplate" Value="{x:Null}"/>
                                        <Condition Property="IconType" Value="Icon"/>
                                        <Condition Property="IconTemplateSelector" Value="{x:Null}"/>
                                    </MultiTrigger.Conditions>
                                   <Setter TargetName="IconContent" Property="Tag" Value="{Binding LargeIcon, RelativeSource={RelativeSource TemplatedParent}}" />
                                    <Setter Property="ContentTemplate" TargetName="IconContent" Value="{StaticResource RibbonItemIconTemplate}"/>
                                </MultiTrigger>
                                <Trigger Property="ResizeDirection" Value="HorizontalAndVertical">
                                    <Setter TargetName="PART_Popup" Property="Width" Value="{Binding ElementName=PART_ResizeThumb, Mode=TwoWay, Path=HorizontalOffset}" />
                                    <Setter TargetName="PART_Popup" Property="Height" Value="{Binding ElementName=PART_ResizeThumb, Mode=TwoWay, Path=VerticalOffset}" />
                                </Trigger>

                                <Trigger Property="ResizeDirection" Value="VerticalOnly">
                                    <Setter TargetName="PART_Popup" Property="Height" Value="{Binding ElementName=PART_ResizeThumb, Mode=TwoWay, Path=VerticalOffset}" />
                                    <Setter TargetName="PART_ResizeThumb" Property="Template" Value="{StaticResource SyncfusionPopupResizeThumbControlTemplate}" />
                                    <Setter TargetName="PART_ResizeThumb" Property="HorizontalAlignment" Value="Center" />
                                </Trigger>

                                <Trigger Property="PopupPosition" Value="Above">
                                    <Setter TargetName="PART_ThumbBorder" Property="DockPanel.Dock" Value="Top" />
                                    <Setter TargetName="PART_ResizeThumb" Property="RenderTransform">
                                        <Setter.Value>
                                            <RotateTransform Angle="270" CenterX="5" CenterY="5" />
                                        </Setter.Value>
                                    </Setter>
                                    <Setter TargetName="PART_ResizeThumb" Property="Cursor" Value="SizeNESW" />
                                </Trigger>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter TargetName="PART_ToggleButton" Property="Background" Value="{StaticResource SecondaryHoverBackground}" />

                                </Trigger>
                                <Trigger Property="IsDropDownOpen" Value="True">
                                    <Setter TargetName="PART_OuterBorder" Property="BorderBrush" Value="{StaticResource SecondaryHoverBackground}" />
                                </Trigger>
                                <Trigger Property="ResizeDirection" Value="NoResize">
                                    <Setter TargetName="PART_ResizeThumb" Property="Visibility" Value="Collapsed" />
                                </Trigger>
                                <MultiDataTrigger>
                                    <MultiDataTrigger.Conditions>
                                        <Condition Binding="{Binding RelativeSource={RelativeSource Self}, Path=PopupPosition}" Value="Above" />
                                        <Condition Binding="{Binding RelativeSource={RelativeSource Self}, Path=FlowDirection}" Value="RightToLeft" />
                                    </MultiDataTrigger.Conditions>
                                    <Setter TargetName="PART_ResizeThumb" Property="RenderTransform">
                                        <Setter.Value>
                                            <RotateTransform Angle="270" CenterX="5" CenterY="5" />
                                        </Setter.Value>
                                    </Setter>
                                    <Setter TargetName="PART_ResizeThumb" Property="Cursor" Value="SizeNWSE" />
                                </MultiDataTrigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </MultiTrigger>

            <MultiTrigger>
                <MultiTrigger.Conditions>
                    <Condition Property="VisualMode" Value="DropDown" />
                    <Condition Property="SizeForm" Value="Small" />
                </MultiTrigger.Conditions>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="{x:Type tools:RibbonGallery}">
                            <Border
                                Name="PART_OuterBorder"
                                BorderBrush="Transparent"
                                BorderThickness="{StaticResource MaterialDark.BorderThickness}"
                                IsEnabled="{TemplateBinding IsEnabled}"
                                Opacity="{TemplateBinding Opacity}">
                                <Border
                                    Name="PART_ToggleButton"
                                    Background="{TemplateBinding Background}"
                                    BorderBrush="{TemplateBinding BorderBrush}"
                                    BorderThickness="{TemplateBinding BorderThickness}"
                                    IsEnabled="{TemplateBinding IsEnabled}"
                                    Opacity="{TemplateBinding Opacity}">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition x:Name="col1"/>
                                            <ColumnDefinition x:Name="col2"/>
                                            <ColumnDefinition x:Name="col3"/>
                                        </Grid.ColumnDefinitions>
                                        <Border 
                                            x:Name="galleryBorder"
                                            Grid.Column="0"
                                            HorizontalAlignment="Center"
                                            VerticalAlignment="Center">
                                            <ContentPresenter 
                                    ContentTemplateSelector="{TemplateBinding IconTemplateSelector}" 
                                    Name="IconContent" Margin="2" ContentTemplate="{TemplateBinding IconTemplate}" Content="{Binding }" Height="16" Width="16"/>

                                        </Border>
                                        <TextBlock
                                            x:Name="galleryLabel"
                                            Grid.Column="1"
                                            Margin="2,0,2,0"
                                            VerticalAlignment="Center"
                                            Foreground="{TemplateBinding Foreground}"
                                            Text="{TemplateBinding Label}" />
                                        <Path
                                            Grid.Column="2" x:Name="ArrowControl"
                                            Width="5"
                                            Height="3"
                                            Margin="1"
                                            HorizontalAlignment="Center"
                                            VerticalAlignment="Center"
                                            Data="M0,0 L100.25,0 100.25,20 80,20 80,39.75 60.5,39.75 60.5,60 39.75,60 39.75,39.75 20.75,39.75 20.75,20 0,20 z"
                                            Fill="{StaticResource IconColor}"
                                            Stretch="Fill" />
                                        <Popup
                                            Name="PART_Popup"
                                            MinWidth="{TemplateBinding ExpandWidth}"
                                            MinHeight="{TemplateBinding ExpandHeight}"
                                            AllowsTransparency="True"
                                            Focusable="False"
                                            IsOpen="{Binding Path=IsDropDownOpen, Mode=TwoWay, RelativeSource={RelativeSource AncestorType={x:Type tools:RibbonGallery}}}"
                                            Placement="Custom"
                                            PopupAnimation="Fade"
                                            StaysOpen="False">
                                            <Border
                                                Background="{StaticResource ContentBackgroundAlt2}"
                                                BorderBrush="{StaticResource BorderAlt}"
                                                BorderThickness="{StaticResource MaterialDark.BorderThickness1}"
                                                Effect="{StaticResource Default.ShadowDepth3}">
                                                <Border.Margin>
                                                            <Thickness>8,0,8,8</Thickness>
                                                </Border.Margin>
                                                <DockPanel LastChildFill="True" SnapsToDevicePixels="True">
                                                    <Border
                                                        Name="PART_ThumbBorder"
                                                        Background="Transparent"
                                                        DockPanel.Dock="Bottom">
                                                        <tools:PopupResizeThumb Name="PART_ResizeThumb" HorizontalAlignment="Right" />
                                                    </Border>
                                                    <tools:GalleryFilterSelector DockPanel.Dock="Top" />
                                                    <Grid DockPanel.Dock="Top">
                                                        <Grid.RowDefinitions>
                                                            <RowDefinition MinHeight="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type tools:RibbonGallery}}, Path=ItemHeight}" />
                                                            <RowDefinition Height="Auto" MinHeight="0" />
                                                        </Grid.RowDefinitions>
                                                        <ScrollViewer Grid.Row="0">
                                                            <ItemsPresenter VerticalAlignment="Top" />
                                                        </ScrollViewer>

                                                        <tools:RibbonMenuGroup
                                                            Grid.Row="1"
                                                            IconBarEnabled="{TemplateBinding MenuIconBarEnabled}"
                                                            ItemsSource="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type tools:RibbonGallery}}, Path=MenuItems}"
                                                            Visibility="{TemplateBinding MenuItems,
                                                                                         Converter={StaticResource CountToVisibilityConverter}}" />
                                                    </Grid>
                                                </DockPanel>
                                            </Border>

                                        </Popup>
                                    </Grid>
                                </Border>
                            </Border>
                            <ControlTemplate.Triggers>
                                <MultiTrigger >
                                    <MultiTrigger.Conditions>
                                        <Condition Property="IconTemplate" Value="{x:Null}"/>
                                        <Condition Property="IconType" Value="VectorImage"/>
                                        <Condition Property="IconTemplateSelector" Value="{x:Null}"/>
                                    </MultiTrigger.Conditions>
                                    <Setter Property="ContentTemplate" TargetName="IconContent" Value="{StaticResource RibbonItemVectorImageTemplate}"/>
                                </MultiTrigger>
                                <MultiTrigger>
                                    <MultiTrigger.Conditions>
                                        <Condition Property="IconTemplate" Value="{x:Null}"/>
                                        <Condition Property="IconType" Value="Icon"/>
                                        <Condition Property="IconTemplateSelector" Value="{x:Null}"/>
                                    </MultiTrigger.Conditions>
                                   <Setter TargetName="IconContent" Property="Tag" Value="{Binding SmallIcon, RelativeSource={RelativeSource TemplatedParent}}" />
                                    <Setter Property="ContentTemplate" TargetName="IconContent" Value="{StaticResource RibbonItemIconTemplate}"/>
                                </MultiTrigger>
                                <Trigger Property="ResizeDirection" Value="HorizontalAndVertical">
                                    <Setter TargetName="PART_Popup" Property="Width" Value="{Binding ElementName=PART_ResizeThumb, Mode=TwoWay, Path=HorizontalOffset}" />
                                    <Setter TargetName="PART_Popup" Property="Height" Value="{Binding ElementName=PART_ResizeThumb, Mode=TwoWay, Path=VerticalOffset}" />
                                </Trigger>

                                <Trigger Property="ResizeDirection" Value="VerticalOnly">
                                    <Setter TargetName="PART_Popup" Property="Height" Value="{Binding ElementName=PART_ResizeThumb, Mode=TwoWay, Path=VerticalOffset}" />
                                    <Setter TargetName="PART_ResizeThumb" Property="Template" Value="{StaticResource SyncfusionPopupResizeThumbControlTemplate}" />
                                    <Setter TargetName="PART_ResizeThumb" Property="HorizontalAlignment" Value="Center" />
                                </Trigger>

                                <Trigger Property="PopupPosition" Value="Above">
                                    <Setter TargetName="PART_ThumbBorder" Property="DockPanel.Dock" Value="Top" />
                                    <Setter TargetName="PART_ResizeThumb" Property="RenderTransform">
                                        <Setter.Value>
                                            <RotateTransform Angle="270" CenterX="5" CenterY="5" />
                                        </Setter.Value>
                                    </Setter>
                                    <Setter TargetName="PART_ResizeThumb" Property="Cursor" Value="SizeNESW" />

                                </Trigger>
                                <Trigger Property="tools:SimplifiedLayoutSettings.ActiveDisplayMode" Value="OverflowMenu">
                                    <Setter Property="Height" Value="NaN"/>
                                    <Setter Property="Margin" Value="0,1"/>
                                    <Setter TargetName="galleryBorder" Property="HorizontalAlignment" Value="Left"/>
                                    <Setter TargetName="galleryLabel" Property="HorizontalAlignment" Value="Left"/>
                                    <Setter TargetName="galleryLabel" Property="Margin" Value="6,0,10,0"/>
                                    <Setter TargetName="galleryLabel" Property="Foreground" Value="{StaticResource ContentForeground}"/>
                                    <Setter TargetName="PART_ToggleButton" Property="BorderThickness" Value="0"/>
                                    <Setter TargetName="PART_ToggleButton" Property="Padding" Value="6,5,0,5"/>
                                    <Setter TargetName="col1" Property="Width" Value="Auto"/>
                                    <Setter TargetName="col3" Property="Width" Value="12"/>
                                    <Setter TargetName="col2" Property="Width" Value="*"/>
                                    <Setter TargetName="PART_Popup" Property="Placement" Value="Left"/>
                                    <Setter Property="RenderTransform" TargetName="ArrowControl">
                                        <Setter.Value>
                                            <RotateTransform Angle="-90" CenterX="2" CenterY="2"/>
                                        </Setter.Value>
                                    </Setter>
                                </Trigger>
                                <MultiTrigger>
                                    <MultiTrigger.Conditions>
                                        <Condition Property="shared:SkinStorage.EnableTouch" Value="True"/>
                                        <Condition Property="tools:SimplifiedLayoutSettings.ActiveDisplayMode" Value="OverflowMenu"/>
                                        <Condition Property="IconTemplate" Value="{x:Null}"/>
                                        <Condition Property="IconType" Value="Icon"/>
                                        <Condition Property="IconTemplateSelector" Value="{x:Null}"/>
                                    </MultiTrigger.Conditions>
                                    <Setter TargetName="IconContent" Property="Tag" Value="{Binding MediumIcon, RelativeSource={RelativeSource TemplatedParent}}" />
                                </MultiTrigger>
                                <MultiTrigger>
                                    <MultiTrigger.Conditions>
                                        <Condition Property="shared:SkinStorage.EnableTouch" Value="True"/>
                                        <Condition Property="tools:SimplifiedLayoutSettings.ActiveDisplayMode" Value="OverflowMenu"/>
                                    </MultiTrigger.Conditions>
                                    <Setter TargetName="PART_ToggleButton" Property="Padding" Value="6,6,0,6"/>
                                    <Setter TargetName="IconContent" Property="Margin" Value="5,2,2,2"/>
                                    <Setter TargetName="IconContent" Property="Tag" Value="{Binding MediumIcon, RelativeSource={RelativeSource TemplatedParent}}" />
                                    <Setter TargetName="IconContent" Property="MinHeight" Value="20" />
                                    <Setter TargetName="IconContent" Property="MinWidth" Value="20" />
                                </MultiTrigger>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter TargetName="PART_ToggleButton" Property="Background" Value="{StaticResource SecondaryHoverBackground}" />

                                </Trigger>
                                <Trigger Property="IsDropDownOpen" Value="True">
                                    <Setter TargetName="PART_OuterBorder" Property="Background" Value="{StaticResource SecondaryHoverBackground}" />

                                </Trigger>
                                <Trigger Property="ResizeDirection" Value="NoResize">
                                    <Setter TargetName="PART_ResizeThumb" Property="Visibility" Value="Collapsed" />
                                </Trigger>
                                <MultiDataTrigger>
                                    <MultiDataTrigger.Conditions>
                                        <Condition Binding="{Binding RelativeSource={RelativeSource Self}, Path=PopupPosition}" Value="Above" />
                                        <Condition Binding="{Binding RelativeSource={RelativeSource Self}, Path=FlowDirection}" Value="RightToLeft" />
                                    </MultiDataTrigger.Conditions>
                                    <Setter TargetName="PART_ResizeThumb" Property="RenderTransform">
                                        <Setter.Value>
                                            <RotateTransform Angle="270" CenterX="5" CenterY="5" />
                                        </Setter.Value>
                                    </Setter>
                                    <Setter TargetName="PART_ResizeThumb" Property="Cursor" Value="SizeNWSE" />
                                </MultiDataTrigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </MultiTrigger>

            <MultiTrigger>
                <MultiTrigger.Conditions>
                    <Condition Property="VisualMode" Value="DropDown" />
                    <Condition Property="SizeForm" Value="ExtraSmall" />
                </MultiTrigger.Conditions>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="{x:Type tools:RibbonGallery}">
                            <Border
                                Name="PART_OuterBorder"
                                Width="33"
                                Height="23"
                                BorderBrush="Transparent"
                                BorderThickness="{StaticResource MaterialDark.BorderThickness}">
                                <Border
                                    Name="PART_ToggleButton"
                                    Width="33"
                                    Height="23"
                                    Margin="0,-1,0,0"
                                    Background="{TemplateBinding Panel.Background}"
                                    BorderBrush="{TemplateBinding BorderBrush}"
                                    BorderThickness="{TemplateBinding BorderThickness}">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition />
                                            <ColumnDefinition />
                                        </Grid.ColumnDefinitions>
                                        <Border
                                            Grid.Column="0"
                                            Width="18"
                                            HorizontalAlignment="Center"
                                            VerticalAlignment="Center">
                                            <ContentPresenter 
                                    ContentTemplateSelector="{TemplateBinding IconTemplateSelector}" 
                                    Name="IconContent" Margin="1" ContentTemplate="{TemplateBinding IconTemplate}" Content="{Binding }" Height="16" Width="16"/>

                                        </Border>
                                        <Path
                                            Grid.Column="1"
                                            Width="5"
                                            Height="3"
                                            Margin="1"
                                            HorizontalAlignment="Center"
                                            VerticalAlignment="Center"
                                            Data="M0,0 L100.25,0 100.25,20 80,20 80,39.75 60.5,39.75 60.5,60 39.75,60 39.75,39.75 20.75,39.75 20.75,20 0,20 z"
                                            Fill="{StaticResource IconColor}"
                                            Stretch="Fill" />
                                        <Popup
                                            Name="PART_Popup"
                                            MinWidth="{TemplateBinding ExpandWidth}"
                                            MinHeight="{TemplateBinding ExpandHeight}"
                                            AllowsTransparency="True"
                                            Focusable="False"
                                            IsOpen="{Binding Path=IsDropDownOpen, Mode=TwoWay, RelativeSource={RelativeSource AncestorType={x:Type tools:RibbonGallery}}}"
                                            Placement="Bottom"
                                            PopupAnimation="Fade"
                                            StaysOpen="False">
                                            <Border
                                                VerticalAlignment="Stretch"
                                                Background="{StaticResource ContentBackgroundAlt2}"
                                                BorderBrush="{StaticResource BorderAlt}"
                                                BorderThickness="{StaticResource MaterialDark.BorderThickness1}"
                                                Effect="{StaticResource Default.ShadowDepth3}">
                                                <Border.Margin>
                                                            <Thickness>8,0,8,8</Thickness>
                                                </Border.Margin>

                                                <DockPanel VerticalAlignment="Stretch" SnapsToDevicePixels="True">
                                                    <Border
                                                        Name="PART_ThumbBorder"
                                                        Background="Transparent"
                                                        DockPanel.Dock="Bottom">
                                                        <tools:PopupResizeThumb Name="PART_ResizeThumb" HorizontalAlignment="Right" />
                                                    </Border>
                                                    <tools:GalleryFilterSelector DockPanel.Dock="Top" />

                                                    <Grid DockPanel.Dock="Top">
                                                        <Grid.RowDefinitions>
                                                            <RowDefinition MinHeight="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type tools:RibbonGallery}}, Path=ItemHeight}" />
                                                            <RowDefinition Height="Auto" MinHeight="0" />
                                                        </Grid.RowDefinitions>
                                                        <ScrollViewer Grid.Row="0">
                                                            <ItemsPresenter VerticalAlignment="Top" />
                                                        </ScrollViewer>
                                                        <tools:RibbonMenuGroup
                                                            Grid.Row="1"
                                                            IconBarEnabled="{TemplateBinding MenuIconBarEnabled}"
                                                            ItemsSource="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type tools:RibbonGallery}}, Path=MenuItems}"
                                                            Visibility="{TemplateBinding MenuItems,
                                                                                         Converter={StaticResource CountToVisibilityConverter}}" />
                                                    </Grid>
                                                </DockPanel>
                                            </Border>

                                        </Popup>
                                    </Grid>
                                </Border>
                            </Border>
                            <ControlTemplate.Triggers>
                                <MultiTrigger>
                                    <MultiTrigger.Conditions>
                                        <Condition Property="tools:Ribbon.IsQATItem" Value="True"/>
                                        <Condition Property="IsMouseOver" Value="False"/>
                                        <Condition Property="IsDropDownOpen" Value="False"/>
                                    </MultiTrigger.Conditions>
                                    <Setter Property="Foreground" Value="{StaticResource SecondaryForeground}"/>
                                    <Setter Property="Background" Value="Transparent"/>
                                </MultiTrigger>
                                <MultiTrigger >
                                    <MultiTrigger.Conditions>
                                        <Condition Property="IconTemplate" Value="{x:Null}"/>
                                        <Condition Property="IconType" Value="VectorImage"/>
                                        <Condition Property="IconTemplateSelector" Value="{x:Null}"/>
                                    </MultiTrigger.Conditions>
                                    <Setter Property="ContentTemplate" TargetName="IconContent" Value="{StaticResource RibbonItemVectorImageTemplate}"/>
                                </MultiTrigger>
                                <MultiTrigger>
                                    <MultiTrigger.Conditions>
                                        <Condition Property="IconTemplate" Value="{x:Null}"/>
                                        <Condition Property="IconType" Value="Icon"/>
                                        <Condition Property="IconTemplateSelector" Value="{x:Null}"/>
                                    </MultiTrigger.Conditions>
                                   <Setter TargetName="IconContent" Property="Tag" Value="{Binding SmallIcon, RelativeSource={RelativeSource TemplatedParent}}" />
                                    <Setter Property="ContentTemplate" TargetName="IconContent" Value="{StaticResource RibbonItemIconTemplate}"/>
                                </MultiTrigger>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter TargetName="PART_ToggleButton" Property="Background" Value="{StaticResource SecondaryHoverBackground}" />

                                </Trigger>
                                <Trigger Property="IsDropDownOpen" Value="True">
                                    <Setter TargetName="PART_OuterBorder" Property="Background" Value="{StaticResource SecondaryHoverBackground}" />

                                </Trigger>
                                <Trigger Property="ResizeDirection" Value="HorizontalAndVertical">
                                    <Setter TargetName="PART_Popup" Property="Width" Value="{Binding ElementName=PART_ResizeThumb, Mode=TwoWay, Path=HorizontalOffset}" />
                                    <Setter TargetName="PART_Popup" Property="Height" Value="{Binding ElementName=PART_ResizeThumb, Mode=TwoWay, Path=VerticalOffset}" />
                                </Trigger>
                                <Trigger Property="ResizeDirection" Value="VerticalOnly">
                                    <Setter TargetName="PART_Popup" Property="Height" Value="{Binding ElementName=PART_ResizeThumb, Mode=TwoWay, Path=VerticalOffset}" />
                                    <Setter TargetName="PART_ResizeThumb" Property="Template" Value="{StaticResource SyncfusionPopupResizeThumbControlTemplate}" />
                                    <Setter TargetName="PART_ResizeThumb" Property="HorizontalAlignment" Value="Center" />
                                </Trigger>
                                <Trigger Property="PopupPosition" Value="Above">
                                    <Setter TargetName="PART_ThumbBorder" Property="DockPanel.Dock" Value="Top" />
                                    <Setter TargetName="PART_ResizeThumb" Property="RenderTransform">
                                        <Setter.Value>
                                            <RotateTransform Angle="270" CenterX="5" CenterY="5" />
                                        </Setter.Value>
                                    </Setter>
                                    <Setter TargetName="PART_ResizeThumb" Property="Cursor" Value="SizeNESW" />

                                </Trigger>
                                <Trigger Property="ResizeDirection" Value="NoResize">
                                    <Setter TargetName="PART_ResizeThumb" Property="Visibility" Value="Collapsed" />
                                </Trigger>
                                <MultiDataTrigger>
                                    <MultiDataTrigger.Conditions>
                                        <Condition Binding="{Binding RelativeSource={RelativeSource Self}, Path=PopupPosition}" Value="Above" />
                                        <Condition Binding="{Binding RelativeSource={RelativeSource Self}, Path=FlowDirection}" Value="RightToLeft" />
                                    </MultiDataTrigger.Conditions>
                                    <Setter TargetName="PART_ResizeThumb" Property="RenderTransform">
                                        <Setter.Value>
                                            <RotateTransform Angle="270" CenterX="5" CenterY="5" />
                                        </Setter.Value>
                                    </Setter>
                                    <Setter TargetName="PART_ResizeThumb" Property="Cursor" Value="SizeNWSE" />
                                </MultiDataTrigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </MultiTrigger>

            <MultiTrigger>
                <MultiTrigger.Conditions>
                    <Condition Property="VisualMode" Value="DropDown" />
                    <Condition Property="IsMouseOver" Value="True" />
                </MultiTrigger.Conditions>
                <Setter Property="BorderBrush" Value="{StaticResource SecondaryHoverBackground}" />
                <Setter Property="Background" Value="{StaticResource SecondaryHoverBackground}" />
            </MultiTrigger>

            <MultiTrigger>
                <MultiTrigger.Conditions>
                    <Condition Property="VisualMode" Value="DropDown" />
                    <Condition Property="IsDropDownOpen" Value="True" />
                </MultiTrigger.Conditions>
                <Setter Property="BorderBrush" Value="{StaticResource SecondarySelectionBackground}" />
                <Setter Property="Background" Value="{StaticResource SecondarySelectionBackground}" />
            </MultiTrigger>

            <MultiTrigger>
                <MultiTrigger.Conditions>
                    <Condition Property="VisualMode" Value="DropDown" />
                    <Condition Property="HasGroups" Value="True" />
                </MultiTrigger.Conditions>
                <Setter Property="ItemsPanel">
                    <Setter.Value>
                        <ItemsPanelTemplate>
                            <tools:GalleryGroupPanel KeyboardNavigation.AcceptsReturn="True" KeyboardNavigation.DirectionalNavigation="Cycle" />
                        </ItemsPanelTemplate>
                    </Setter.Value>
                </Setter>
            </MultiTrigger>

            <MultiTrigger>
                <MultiTrigger.Conditions>
                    <Condition Property="VisualMode" Value="DropDown" />
                    <Condition Property="IsEnabled" Value="False" />
                </MultiTrigger.Conditions>
                <Setter Property="BorderBrush" Value="Transparent" />
                <Setter Property="Background" Value="Transparent" />
            </MultiTrigger>
            <MultiTrigger>
                <MultiTrigger.Conditions>
                    <Condition Property="tools:SimplifiedLayoutSettings.LayoutMode" Value="Simplified"/>
                    <Condition Property="VisualMode" Value="InRibbon"/>
                </MultiTrigger.Conditions>
                <Setter Property="ItemsPanel">
                    <Setter.Value>
                        <ItemsPanelTemplate>
                            <WrapPanel x:Name="WrapPanel" Background="Transparent"
                               ClipToBounds="True"
                               ItemHeight="{Binding ActualHeight, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type tools:RibbonBar}}}"
                               ItemWidth="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type tools:RibbonGallery}}, Path=ItemWidth}" />
                        </ItemsPanelTemplate>
                    </Setter.Value>
                </Setter>
                <Setter Property="Margin" Value="5,4,5,5"/>
                <Setter Property="Height" Value="NaN"/>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="{x:Type tools:RibbonGallery}">
                            <Border Height="{TemplateBinding Height}"
                            MaxHeight="62"
                            Background="{TemplateBinding Background}"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="1">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="16" />
                                    </Grid.ColumnDefinitions>

                                    <Grid Grid.Column="1">
                                        <Border
                                    Name="PART_ToggleButton"
                                    Width="16"
                                    Margin="0,0,-2,-1"
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Stretch"
                                    Background="{StaticResource ContentBackgroundAlt2}"
                                    BorderBrush="{StaticResource BorderAlt}"
                                    BorderThickness="{StaticResource MaterialDark.BorderThickness1}">
                                            <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                                                <Path
                                            x:Name="Path1"
                                            Margin="0,0,0,2"
                                            HorizontalAlignment="Center"
                                            Data="M0,0.5L7,0.5"
                                            Fill="{StaticResource IconColor}"
                                            Stroke="{StaticResource IconColor}" />
                                                <Path
                                            x:Name="Path2"
                                            Width="5"
                                            Height="3"
                                            HorizontalAlignment="Center"
                                            VerticalAlignment="Center"
                                            Data="M0,0 L100.25,0 100.25,20 80,20 80,39.75 60.5,39.75 60.5,60 39.75,60 39.75,39.75 20.75,39.75 20.75,20 0,20 z"
                                            Fill="{StaticResource IconColor}"
                                            Stretch="Fill"
                                            Stroke="{StaticResource IconColor}" />
                                            </StackPanel>
                                        </Border>
                                    </Grid>
                                    <tools:InRibbonItemsPresenter 
                                        x:Name="PART_ScrollPresenter"
                                        Margin="1"
                                        ClipToBounds="True" />
                                    <Popup
                                Name="PART_Popup"
                                AllowsTransparency="True"
                                Focusable="False"
                                IsOpen="{Binding Path=IsDropDownOpen, Mode=TwoWay, RelativeSource={RelativeSource AncestorType={x:Type tools:RibbonGallery}}}"
                                Placement="Custom"
                                PopupAnimation="Fade"
                                StaysOpen="False">
                                        <Border
                                    Background="{StaticResource ContentBackgroundAlt2}"
                                    BorderBrush="{StaticResource BorderAlt}"
                                    BorderThickness="{StaticResource MaterialDark.BorderThickness}"
                                    Effect="{StaticResource Default.ShadowDepth3}">
                                            <Border.Margin>
                                                        <Thickness>8,0,8,8</Thickness>
                                            </Border.Margin>
                                            <DockPanel SnapsToDevicePixels="True">
                                                <Border
                                            Name="PART_ThumbBorder"
                                            Background="Transparent"
                                            DockPanel.Dock="Bottom">
                                                    <tools:PopupResizeThumb
                                                Name="PART_ResizeThumb"
                                                HorizontalAlignment="Right"
                                                IsTabStop="False" />
                                                </Border>
                                                <tools:GalleryFilterSelector DockPanel.Dock="Top" />
                                                <Grid DockPanel.Dock="Top">
                                                    <Grid.RowDefinitions>
                                                        <RowDefinition MinHeight="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type tools:RibbonGallery}}, Path=ItemHeight}" />
                                                        <RowDefinition Height="Auto" />
                                                    </Grid.RowDefinitions>
                                                    <ScrollViewer
                                                Name="PART_ScrollViewer"
                                                Grid.Row="0"
                                                Style="{StaticResource WPFScrollViewerStyle}">
                                                        <StackPanel>
                                                            <ItemsControl Name="PART_PopupItemsControl">
                                                                <ItemsControl.ItemsPanel>
                                                                    <ItemsPanelTemplate>
                                                                        <WrapPanel
                                                                    IsItemsHost="True"
                                                                    ItemHeight="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type tools:RibbonGallery}}, Path=ItemHeight}"
                                                                    ItemWidth="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type tools:RibbonGallery}}, Path=ItemWidth}" />
                                                                    </ItemsPanelTemplate>
                                                                </ItemsControl.ItemsPanel>
                                                            </ItemsControl>
                                                        </StackPanel>
                                                    </ScrollViewer>
                                                    <tools:RibbonMenuGroup
                                                        Grid.Row="1"
                                                        tools:SimplifiedLayoutSettings.LayoutMode="Normal"
                                                        IconBarEnabled="{TemplateBinding MenuIconBarEnabled}"
                                                        ItemsSource="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type tools:RibbonGallery}}, Path=MenuItems}"
                                                        Visibility="{TemplateBinding MenuItems, Converter={StaticResource CountToVisibilityConverter}}" />
                                                </Grid>
                                            </DockPanel>
                                        </Border>

                                    </Popup>
                                </Grid>
                            </Border>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsDropDownOpen" Value="False">
                                    <Setter Property="ItemHeight" Value="30"/>
                                </Trigger>
                                <Trigger SourceName="PART_ToggleButton" Property="IsMouseOver" Value="True">
                                    <Setter TargetName="PART_ToggleButton" Property="Background" Value="{StaticResource SecondaryHoverBackground}" />
                                    <Setter TargetName="Path1" Property="Fill" Value="{StaticResource IconColor}" />
                                    <Setter TargetName="Path2" Property="Stroke" Value="{StaticResource IconColor}" />
                                </Trigger>
                                <Trigger Property="HasGroups" Value="True">
                                    <Setter TargetName="PART_PopupItemsControl" Property="ItemsPanel">
                                        <Setter.Value>
                                            <ItemsPanelTemplate>
                                                <tools:GalleryGroupPanel KeyboardNavigation.AcceptsReturn="True" KeyboardNavigation.DirectionalNavigation="Cycle" />
                                            </ItemsPanelTemplate>
                                        </Setter.Value>
                                    </Setter>
                                </Trigger>
                                <Trigger Property="ResizeDirection" Value="HorizontalAndVertical">
                                    <Setter TargetName="PART_Popup" Property="Width" Value="{Binding ElementName=PART_ResizeThumb, Mode=TwoWay, Path=HorizontalOffset}" />
                                    <Setter TargetName="PART_Popup" Property="Height" Value="{Binding ElementName=PART_ResizeThumb, Mode=TwoWay, Path=VerticalOffset}" />
                                </Trigger>
                                <Trigger Property="ResizeDirection" Value="VerticalOnly">
                                    <Setter TargetName="PART_Popup" Property="Height" Value="{Binding ElementName=PART_ResizeThumb, Mode=TwoWay, Path=VerticalOffset}" />
                                    <Setter TargetName="PART_ResizeThumb" Property="Template" Value="{StaticResource SyncfusionPopupResizeThumbControlTemplate}" />
                                    <Setter TargetName="PART_ResizeThumb" Property="HorizontalAlignment" Value="Center" />
                                </Trigger>
                                <Trigger Property="PopupPosition" Value="Above">
                                    <Setter TargetName="PART_ThumbBorder" Property="DockPanel.Dock" Value="Top" />
                                    <Setter TargetName="PART_ScrollViewer" Property="DockPanel.Dock" Value="Bottom" />
                                    <Setter TargetName="PART_ResizeThumb" Property="RenderTransform">
                                        <Setter.Value>
                                            <RotateTransform Angle="270" CenterX="5" CenterY="5" />
                                        </Setter.Value>
                                    </Setter>
                                    <Setter TargetName="PART_ResizeThumb" Property="Cursor" Value="SizeNESW" />
                                </Trigger>
                                <Trigger Property="ResizeDirection" Value="NoResize">
                                    <Setter TargetName="PART_ResizeThumb" Property="Visibility" Value="Collapsed" />
                                </Trigger>
                                <MultiDataTrigger>
                                    <MultiDataTrigger.Conditions>
                                        <Condition Binding="{Binding RelativeSource={RelativeSource Self}, Path=PopupPosition}" Value="Above" />
                                        <Condition Binding="{Binding RelativeSource={RelativeSource Self}, Path=FlowDirection}" Value="RightToLeft" />
                                    </MultiDataTrigger.Conditions>
                                    <Setter TargetName="PART_ResizeThumb" Property="RenderTransform">
                                        <Setter.Value>
                                            <RotateTransform Angle="270" CenterX="5" CenterY="5" />
                                        </Setter.Value>
                                    </Setter>
                                    <Setter TargetName="PART_ResizeThumb" Property="Cursor" Value="SizeNWSE" />
                                </MultiDataTrigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </MultiTrigger>

            <MultiTrigger>
                <MultiTrigger.Conditions>
                    <Condition Property="tools:SimplifiedLayoutSettings.LayoutMode" Value="Simplified"/>
                    <Condition Property="VisualMode" Value="DropDown"/>
                </MultiTrigger.Conditions>
                <Setter Property="Margin" Value="0"/>
                <Setter Property="BorderThickness" Value="0" />
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="{x:Type tools:RibbonGallery}">
                            <Border Name="PART_OuterBorder"
                                    BorderBrush="Transparent"
                                    BorderThickness="0"
                                    IsEnabled="{TemplateBinding IsEnabled}"
                                    Opacity="{TemplateBinding Opacity}">
                                <Border Name="PART_ToggleButton"
                                        Background="{TemplateBinding Background}"
                                        BorderBrush="{TemplateBinding BorderBrush}"
                                        BorderThickness="{TemplateBinding BorderThickness}"
                                        IsEnabled="{TemplateBinding IsEnabled}"
                                        Opacity="{TemplateBinding Opacity}">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition />
                                            <ColumnDefinition />
                                            <ColumnDefinition />
                                        </Grid.ColumnDefinitions>
                                        <Border Grid.Column="0"
                                                HorizontalAlignment="Center"
                                                VerticalAlignment="Center">
                                            <ContentPresenter 
                                    ContentTemplateSelector="{TemplateBinding IconTemplateSelector}" 
                                    Name="IconContent" Margin="2" ContentTemplate="{TemplateBinding IconTemplate}" Content="{Binding }" Height="20" Width="20"/>

                                        </Border>
                                        <TextBlock Grid.Column="1"
                                                   Margin="2,0,2,0"
                                                   VerticalAlignment="Center"
                                                   Foreground="{TemplateBinding Foreground}"
                                                   Text="{TemplateBinding Label}" />
                                        <Path
                                            Grid.Column="2"
                                            Width="5"
                                            Height="3"
                                            Margin="1"
                                            HorizontalAlignment="Center"
                                            VerticalAlignment="Center"
                                            Data="M0,0 L100.25,0 100.25,20 80,20 80,39.75 60.5,39.75 60.5,60 39.75,60 39.75,39.75 20.75,39.75 20.75,20 0,20 z"
                                            Fill="{StaticResource ContentBackgroundAlt2}"
                                            Stretch="Fill" />
                                        <Popup 
                                            Name="PART_Popup"
                                            MinWidth="{TemplateBinding ExpandWidth}"
                                            MinHeight="{TemplateBinding ExpandHeight}"
                                            AllowsTransparency="True"
                                            Focusable="False"
                                            IsOpen="{Binding Path=IsDropDownOpen, Mode=TwoWay, RelativeSource={RelativeSource AncestorType={x:Type tools:RibbonGallery}}}"
                                            Placement="Custom"
                                            PopupAnimation="Fade"
                                            StaysOpen="False">
                                            <Border
                                                Background="{StaticResource ContentBackgroundAlt2}"
                                                BorderBrush="{StaticResource BorderAlt}"
                                                BorderThickness="{StaticResource MaterialDark.BorderThickness1}"
                                                Effect="{StaticResource Default.ShadowDepth3}">
                                                <Border.Margin>
                                                            <Thickness>8,0,8,8</Thickness>
                                                </Border.Margin>
                                                <DockPanel LastChildFill="True" SnapsToDevicePixels="True">
                                                    <Border
                                                        Name="PART_ThumbBorder"
                                                        Background="Transparent"
                                                        DockPanel.Dock="Bottom">
                                                        <tools:PopupResizeThumb Name="PART_ResizeThumb" HorizontalAlignment="Right" />
                                                    </Border>
                                                    <tools:GalleryFilterSelector DockPanel.Dock="Top" />
                                                    <Grid DockPanel.Dock="Top">
                                                        <Grid.RowDefinitions>
                                                            <RowDefinition MinHeight="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type tools:RibbonGallery}}, Path=ItemHeight}" />
                                                            <RowDefinition Height="Auto" MinHeight="0" />
                                                        </Grid.RowDefinitions>
                                                        <ScrollViewer Grid.Row="0">
                                                            <ItemsPresenter VerticalAlignment="Top" />
                                                        </ScrollViewer>

                                                        <tools:RibbonMenuGroup
                                                            Grid.Row="1"
                                                            tools:SimplifiedLayoutSettings.LayoutMode="Normal"
                                                            IconBarEnabled="{TemplateBinding MenuIconBarEnabled}"
                                                            ItemsSource="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type tools:RibbonGallery}}, Path=MenuItems}"
                                                            Visibility="{TemplateBinding MenuItems,
                                                                                         Converter={StaticResource CountToVisibilityConverter}}" />
                                                    </Grid>
                                                </DockPanel>
                                            </Border>
                                        </Popup>
                                    </Grid>
                                </Border>
                            </Border>
                            <ControlTemplate.Triggers>
                                <Trigger Property="Visibility" Value="Visible">
                                    <Setter Property="Height" Value="{Binding Path=ActualHeight, RelativeSource={RelativeSource AncestorType={x:Type tools:RibbonBar}}}"/>
                                </Trigger>
                                <MultiTrigger >
                                    <MultiTrigger.Conditions>
                                        <Condition Property="IconTemplate" Value="{x:Null}"/>
                                        <Condition Property="IconType" Value="VectorImage"/>
                                        <Condition Property="IconTemplateSelector" Value="{x:Null}"/>
                                    </MultiTrigger.Conditions>
                                    <Setter Property="ContentTemplate" TargetName="IconContent" Value="{StaticResource RibbonItemVectorImageTemplate}"/>
                                </MultiTrigger>
                                <MultiTrigger>
                                    <MultiTrigger.Conditions>
                                        <Condition Property="IconTemplate" Value="{x:Null}"/>
                                        <Condition Property="IconType" Value="Icon"/>
                                        <Condition Property="IconTemplateSelector" Value="{x:Null}"/>
                                    </MultiTrigger.Conditions>
                                   <Setter TargetName="IconContent" Property="Tag" Value="{Binding MediumIcon, RelativeSource={RelativeSource TemplatedParent}}" />
                                    <Setter Property="ContentTemplate" TargetName="IconContent" Value="{StaticResource RibbonItemIconTemplate}"/>
                                </MultiTrigger>
                                <Trigger Property="ResizeDirection" Value="HorizontalAndVertical">
                                    <Setter TargetName="PART_Popup" Property="Width" Value="{Binding ElementName=PART_ResizeThumb, Mode=TwoWay, Path=HorizontalOffset}" />
                                    <Setter TargetName="PART_Popup" Property="Height" Value="{Binding ElementName=PART_ResizeThumb, Mode=TwoWay, Path=VerticalOffset}" />
                                </Trigger>
                                <Trigger Property="ResizeDirection" Value="VerticalOnly">
                                    <Setter TargetName="PART_Popup" Property="Height" Value="{Binding ElementName=PART_ResizeThumb, Mode=TwoWay, Path=VerticalOffset}" />
                                    <Setter TargetName="PART_ResizeThumb" Property="Template" Value="{StaticResource VerticalPopupResizeThumbTemplate}" />
                                    <Setter TargetName="PART_ResizeThumb" Property="HorizontalAlignment" Value="Center" />
                                </Trigger>
                                <Trigger Property="PopupPosition" Value="Above">
                                    <Setter TargetName="PART_ThumbBorder" Property="DockPanel.Dock" Value="Top" />
                                    <Setter Property="RenderTransform" TargetName="PART_ResizeThumb">
                                        <Setter.Value>
                                            <RotateTransform Angle="270" CenterX="5" CenterY="5"/>
                                        </Setter.Value>
                                    </Setter>
                                    <Setter Property="Cursor" Value="SizeNESW" TargetName="PART_ResizeThumb" />
                                </Trigger>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter TargetName="PART_ToggleButton" Property="Background" Value="{StaticResource SecondaryHoverBackground}" />
                                </Trigger>
                                <Trigger Property="IsDropDownOpen" Value="True">
                                    <Setter TargetName="PART_OuterBorder" Property="Background" Value="{StaticResource SecondaryHoverBackground}" />
                                </Trigger>
                                <Trigger Property="ResizeDirection" Value="NoResize">
                                    <Setter Property="Visibility" Value="Collapsed" TargetName="PART_ResizeThumb"/>
                                </Trigger>
                                <MultiDataTrigger>
                                    <MultiDataTrigger.Conditions>
                                        <Condition Binding="{Binding RelativeSource={RelativeSource Self},Path=PopupPosition}" Value="Above"/>
                                        <Condition Binding="{Binding RelativeSource={RelativeSource Self},Path=FlowDirection}" Value="RightToLeft"/>
                                    </MultiDataTrigger.Conditions>
                                    <Setter Property="RenderTransform" TargetName="PART_ResizeThumb">
                                        <Setter.Value>
                                            <RotateTransform Angle="270" CenterX="5" CenterY="5"/>
                                        </Setter.Value>
                                    </Setter>
                                    <Setter Property="Cursor" Value="SizeNWSE" TargetName="PART_ResizeThumb" />
                                </MultiDataTrigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </MultiTrigger>
        </Style.Triggers>
    </Style>
    <Style BasedOn="{StaticResource SyncfusionRibbonGalleryStyle}" TargetType="{x:Type tools:RibbonGallery}" />

</ResourceDictionary>
